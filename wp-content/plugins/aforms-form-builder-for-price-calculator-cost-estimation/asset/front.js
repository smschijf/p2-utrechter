(()=>{var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},a=e.parcelRequire94c2;function r(e,n){for(var t=[],a=[],r=arguments.length;r-- >2;)t.push(arguments[r]);for(;t.length;){var i=t.pop();if(i&&i.pop)for(r=i.length;r--;)t.push(i[r]);else null!=i&&!0!==i&&!1!==i&&a.push(i)}return"function"==typeof e?e(n||{},a):{nodeName:e,attributes:n||{},children:a,key:n&&n.key}}function i(e,n,t,a){var r,i=[].map,o=a&&a.children[0]||null,l=o&&function e(n){return{nodeName:n.nodeName.toLowerCase(),attributes:{},children:i.call(n.childNodes,(function(n){return 3===n.nodeType?n.nodeValue:e(n)}))}}(o),u=[],s=!0,c=p(e),d=function e(n,t,a){for(var r in a)"function"==typeof a[r]?function(e,r){a[e]=function(e){var i=r(e);return"function"==typeof i&&(i=i(g(n,c),a)),i&&i!==(t=g(n,c))&&!i.then&&m(c=w(n,p(t,i),c)),i}}(r,a[r]):e(n.concat(r),t[r]=p(t[r]),a[r]=p(a[r]));return a}([],c,p(n));function v(e){return"function"==typeof e?v(e(c,d)):null!=e?e:""}function f(){r=!r;var e=v(t);for(a&&!r&&(o=k(a,o,l,l=e)),s=!1;u.length;)u.pop()()}function m(){r||(r=!0,setTimeout(f))}function p(e,n){var t={};for(var a in e)t[a]=e[a];for(var a in n)t[a]=n[a];return t}function w(e,n,t){var a={};return e.length?(a[e[0]]=e.length>1?w(e.slice(1),n,t[e[0]]):n,p(t,a)):n}function g(e,n){for(var t=0;t<e.length;)n=n[e[t++]];return n}function q(e){return e?e.key:null}function h(e){return e.currentTarget.events[e.type](e)}function b(e,n,t,a,r){if("key"===n);else if("style"===n)if("string"==typeof t)e.style.cssText=t;else for(var i in"string"==typeof a&&(a=e.style.cssText=""),p(a,t)){var o=null==t||null==t[i]?"":t[i];"-"===i[0]?e.style.setProperty(i,o):e.style[i]=o}else"o"===n[0]&&"n"===n[1]?(n=n.slice(2),e.events?a||(a=e.events[n]):e.events={},e.events[n]=t,t?a||e.addEventListener(n,h):e.removeEventListener(n,h)):n in e&&"list"!==n&&"type"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!r?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n)}function y(e,n){var t="string"==typeof e||"number"==typeof e?document.createTextNode(e):(n=n||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),a=e.attributes;if(a){a.oncreate&&u.push((function(){a.oncreate(t)}));for(var r=0;r<e.children.length;r++)t.appendChild(y(e.children[r]=v(e.children[r]),n));for(var i in a)b(t,i,a[i],null,n)}return t}function x(e,n){var t=n.attributes;if(t){for(var a=0;a<n.children.length;a++)x(e.childNodes[a],n.children[a]);t.ondestroy&&t.ondestroy(e)}return e}function T(e,n,t){function a(){e.removeChild(x(n,t))}var r=t.attributes&&t.attributes.onremove;r?r(n,a):a()}function k(e,n,t,a,r){if(a===t);else if(null==t||t.nodeName!==a.nodeName){var i=y(a,r);e.insertBefore(i,n),null!=t&&T(e,n,t),n=i}else if(null==t.nodeName)n.nodeValue=a;else{!function(e,n,t,a){for(var r in p(n,t))t[r]!==("value"===r||"checked"===r?e[r]:n[r])&&b(e,r,t[r],n[r],a);var i=s?t.oncreate:t.onupdate;i&&u.push((function(){i(e,n)}))}(n,t.attributes,a.attributes,r=r||"svg"===a.nodeName);for(var o={},l={},c=[],d=t.children,f=a.children,m=0;m<d.length;m++){c[m]=n.childNodes[m],null!=(g=q(d[m]))&&(o[g]=[c[m],d[m]])}m=0;for(var w=0;w<f.length;){var g=q(d[m]),h=q(f[w]=v(f[w]));if(l[g])m++;else if(null==h||h!==q(d[m+1]))if(null==h||s)null==g&&(k(n,c[m],d[m],f[w],r),w++),m++;else{var x=o[h]||[];g===h?(k(n,x[0],x[1],f[w],r),m++):x[0]?k(n,n.insertBefore(x[0],c[m]),x[1],f[w],r):k(n,c[m],null,f[w],r),l[h]=f[w],w++}else null==g&&T(n,c[m],d[m]),m++}for(;m<d.length;)null==q(d[m])&&T(n,c[m],d[m]),m++;for(var m in o)l[m]||T(n,o[m][0],o[m][1])}return n}return m(),d}null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in t){var a=t[e];delete t[e];var r={id:e,exports:{}};return n[e]=r,a.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){t[e]=n},e.parcelRequire94c2=a);var o,l,u,s={},c=[];l=o||(o={}),u=function(){function e(e,n){if(void 0===e&&(e=""),this.URL="https://yubinbango.github.io/yubinbango-data/data",this.REGION=[null,"北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],e){var t=e.replace(/[０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})).match(/\d/g).join(""),a=this.chk7(t);a?this.getAddr(a,n):n(this.addrDic())}}return e.prototype.chk7=function(e){if(7===e.length)return e},e.prototype.addrDic=function(e,n,t,a,r){return void 0===e&&(e=""),void 0===n&&(n=""),void 0===t&&(t=""),void 0===a&&(a=""),void 0===r&&(r=""),{region_id:e,region:n,locality:t,street:a,extended:r}},e.prototype.selectAddr=function(e){return e&&e[0]&&e[1]?this.addrDic(e[0],this.REGION[e[0]],e[1],e[2],e[3]):this.addrDic()},e.prototype.jsonp=function(e,n){window.$yubin=function(e){return n(e)};var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("charset","UTF-8"),t.setAttribute("src",e),document.head.appendChild(t)},e.prototype.getAddr=function(e,n){var t=this,a=e.substr(0,3);if(a in c&&e in c[a])return n(this.selectAddr(c[a][e]));this.jsonp(this.URL+"/"+a+".js",(function(r){return c[a]=r,n(t.selectAddr(r[e]))}))},e}(),l.Core=u,s=o,a.register("cueuT",(function(e,n){"use strict";e.exports=function(e,n,t,a){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+e)?+e:0,i=isFinite(+n)?Math.abs(n):0,o=void 0===a?",":a,l=void 0===t?".":t,u="";return u=(i?function(e,n){if(-1===(""+e).indexOf("e"))return+(Math.round(e+"e+"+n)+"e-"+n);var t=(""+e).split("e"),a="";return+t[1]+n>0&&(a="+"),(+(Math.round(+t[0]+"e"+a+(+t[1]+n))+"e-"+n)).toFixed(n)}(r,i).toString():""+Math.round(r)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(u[1]||"").length<i&&(u[1]=u[1]||"",u[1]+=new Array(i-u[1].length+1).join("0")),u.join(l)}}));var d,v=(d=a("cueuT"))&&d.__esModule?d:{default:d},f={};Object.defineProperty(f,"__esModule",{value:!0}),f.tnOnRemove=f.tnOnCreate=f.TextInput=f.TextArea=f.Select=f.Range=f.RadioButton=f.InputGroup=f.Image=f.FileInput=f.File=f.Echo=f.Control=f.Checkbox=f.Button=void 0;var m=["name","extensions","onchange","multiple","invalid","inputProps","xclass","inputXclass"],p=["url","name","loading","ondelete","deleteText","index","readonly"],w=["type","disabled","xclass","onclick","name"];function g(){return g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},g.apply(this,arguments)}function q(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var h=function(e){e.classList.add("wq-is-created"),e.classList.add("wq-is-run"),e.classList.add("wq-for-created"),window.setTimeout((function(){e.classList.remove("wq-is-created");var n=function n(t){t.target===e&&(e.classList.remove("wq-is-run"),e.classList.remove("wq-for-created"),e.removeEventListener("transitionend",n))};e.addEventListener("transitionend",n),window.setTimeout((function(){e.classList.remove("wq-is-run"),e.classList.remove("wq-for-created"),e.removeEventListener("transitionend",n)}),800)}),100)};f.tnOnCreate=h;var b=function(e,n){e.classList.add("wq-is-run"),e.classList.add("wq-for-removed"),window.setTimeout((function(){var t=!1;e.classList.add("wq-is-removed"),e.addEventListener("transitionend",(function(a){a.target===e&&(e.classList.remove("wq-is-run"),e.classList.remove("wq-for-removed"),t||(n(),t=!0))})),window.setTimeout((function(){e.classList.remove("wq-is-run"),e.classList.remove("wq-for-removed"),t||(n(),t=!0)}),800)}),100)};f.tnOnRemove=b;var y=function(e){var n=e.src,t=e.scaling,a=void 0===t?"center":t,i=e.alt,o=void 0===i?"":i,l=e.xclass,u=void 0===l?"":l,s={backgroundImage:"url("+n+")"};return r("div",{class:"wq-Image wq-scaling-".concat(a," ").concat(u," ").concat(n?"":"wq-src-empty"),style:s,title:o},r("img",{src:n,alt:o,class:"wq--img"}))};f.Image=y;f.TextInput=function(e){var n=e.type,t=e.size,a=e.name,i=e.placeholder,o=e.value,l=e.invalid,u=void 0!==l&&l,s=e.oninput,c=e.onblur,d=e.xclass,v=void 0===d?"":d,f=u?"wq-is-invalid":"",m="wq-text-".concat(a);return r("input",{type:n,class:"wq-TextInput wq-size-".concat(t," ").concat(f," ").concat(v),id:m,name:a,placeholder:i,value:o,oninput:s,onblur:c})};f.TextArea=function(e){var n=e.name,t=e.placeholder,a=e.value,i=e.size,o=void 0===i?"normal":i,l=e.invalid,u=void 0!==l&&l,s=e.oninput,c=e.onblur,d=e.xclass,v=void 0===d?"":d,f=u?"wq-is-invalid":"",m="wq-textarea-".concat(n);return r("textarea",{class:"wq-TextArea ".concat(f," wq-size-").concat(o," ").concat(v),id:m,name:n,placeholder:t,value:a,oninput:s,onblur:c})};f.RadioButton=function(e,n){var t=e.index,a=e.name,i=e.value,o=e.checked,l=e.invalid,u=void 0!==l&&l,s=e.onchange,c=e.xclass,d=void 0===c?"":c,v=e.inputXclass,f=void 0===v?"":v,m="wq-radio-".concat(a,"-").concat(t),p=u?"wq-is-invalid":"";return r("div",{class:"wq-Radio ".concat(d),id:m+"-wrapper"},r("input",{type:"radio",name:a,value:i,checked:o,onchange:s,id:m,class:"".concat(p," ").concat(f)}),r("label",{for:m},n))};f.Checkbox=function(e,n){var t=e.name,a=e.value,i=e.checked,o=e.invalid,l=void 0!==o&&o,u=e.onchange,s=e.xclass,c=void 0===s?"":s,d=e.id,v=void 0===d?null:d,f=e.inputXclass,m=void 0===f?"":f;null===v&&(v="wq-checkbox-".concat(t));var p=l?"wq-is-invalid":"";return r("div",{class:"wq-Checkbox ".concat(c),id:v+"-wrapper"},r("input",{type:"checkbox",name:t,value:a,checked:i,onchange:u,id:v,class:"".concat(p," ").concat(m)}),r("label",{for:v},n))};f.Select=function(e){var n=e.name,t=e.options,a=e.value,i=e.invalid,o=void 0!==i&&i,l=e.onchange,u=e.placeholder,s=e.xclass,c=void 0===s?"":s,d=e.inputXclass,v=void 0===d?"":d,f="wq-select-".concat(n),m=o?"wq-is-invalid":"";return u=u||"",r("div",{class:"wq-Select ".concat(c),id:f+"-wrapper"},r("select",function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}({class:"wq--input",name:n,onchange:l,id:f},"class","wq--input ".concat(m," ").concat(v)),r("option",{value:"",disabled:!0,selected:!a},u),t.map((function(e){return r("option",{value:e,selected:e==a},e)}))))};f.Range=function(e){var n=e.name,t=e.min,a=e.max,i=e.step,o=e.value,l=e.invalid,u=void 0!==l&&l,s=e.oninput,c=e.onchange,d=e.xclass,v=void 0===d?"":d,f=e.suffix,m=void 0===f?"":f,p=e.inputXclass,w=void 0===p?"":p,g="wq-range-".concat(n,"-wrapper"),q=(a-t+1)/i,h=q<=2?"nano":q<=4?"mini":q<=6?"small":q<=10?"medium":q<=16?"large":"xlarge";return r("div",{class:"wq-Range ".concat(u?"wq-is-invalid":""," wq-size-").concat(h," ").concat(v),id:g},r("span",{class:"wq--label wq-for-min"},t),r("input",{type:"range",class:"wq--input ".concat(w),name:n,id:n,value:o,min:t,max:a,step:i,oninput:s,onchange:c}),r("span",{class:"wq--label wq-for-max"},a),r("span",{class:"wq--state"},o,r("span",{class:"wq--state-suffix"},m)))};f.FileInput=function(e,n){var t=e.name,a=e.extensions,i=e.onchange,o=e.multiple,l=e.invalid,u=void 0!==l&&l,s=e.inputProps,c=void 0===s?{}:s,d=e.xclass,v=void 0===d?"":d,f=e.inputXclass,p=void 0===f?"":f,w=q(e,m),h=a.split(",").map((function(e){return"."+e.trim()})).join(","),b="wq-file-"+t;return r("div",g({class:"wq-FileInput ".concat(u?"wq-is-invalid":""," ").concat(v)},w),r("input",g({type:"file",id:b,class:"wq--input ".concat(p),onchange:i,accept:h},c,{multiple:o})),r("label",{class:"wq--label",for:b},r("span",{class:"wq--text"},n)))};f.File=function(e){var n=e.url,t=e.name,a=e.loading,i=e.ondelete,o=(e.deleteText,e.index),l=e.readonly,u=void 0!==l&&l,s=q(e,p),c=n&&function(e){var n=e.lastIndexOf("."),t=e.slice(n+1).trim().toLowerCase();return-1!=" jpeg jpg gif png ".indexOf(t)}(t);return r("div",g({class:"wq-File wq-lct-enabled ".concat(a?"wq-is-loading":""," ").concat(c?"wq-is-viewable":""," ").concat(u?"wq-is-readonly":""),oncreate:h,onremove:b},s),c?r(y,{src:n,alt:t,scaling:"cover",xclass:"wq-belongs-file",title:t}):null,r("div",{class:"wq--filename",title:t},t),u?null:r("div",{class:"wq--actions"},r(x,{onclick:i,xclass:"wq-belongs-file wq-for-delete","data-index":o})))};f.Echo=function(e){var n=e.name,t=e.value,a=e.glue,i=e.xclass,o=void 0===i?"":i,l="wq-echo-".concat(n),u=(t=Array.isArray(t)?t.join(a):null===t?"":t).split(/\r?\n/).reduce((function(e,n){return e.push(n),e.push(r("br",null)),e}),[]);return r("div",{class:"wq-Echo ".concat(o),id:l},u)};var x=function(e,n){var t=e.type,a=void 0===t?"normal":t,i=e.disabled,o=void 0!==i&&i,l=e.xclass,u=void 0===l?"":l,s=e.onclick,c=e.name,d=void 0===c?null:c,v=q(e,w);return r("button",g({type:"button",name:d,class:"wq-Button wq-type-".concat(a," ").concat(u),disabled:o,onclick:s},v),n)};f.Button=x;f.InputGroup=function(e,n){var t=e.gutter,a=void 0===t?"none":t,i=e.xclass,o=void 0===i?"":i;return r("div",{class:"wq-InputGroup wq-gutter-".concat(a," ").concat(o)},n)};f.Control=function(e,n){var t=e.label,a=e.required,i=e.message,o=e.note,l=e.requiredText,u=e.xclass,s=void 0===u?"":u,c=e.id,d=void 0===c?null:c,v=e.key,f=void 0===v?null:v;return r("div",{class:"wq-Control wq-lct-enabled ".concat(s),id:d,oncreate:h,onremove:b,key:f},r("div",{class:"wq--header ".concat(t?"":"wq-content-empty")},r("span",{class:"wq--label"},t),r("span",{class:"wq--required ".concat(a?"":"wq-is-optional")},l)),r("div",{class:"wq--body"},n,o?r("div",{class:"wq--note"},o):null,i?r("div",{class:"wq--message wq-lct-enabled",oncreate:h,onremove:b},i):null))};var T=["key"],k=["env","effectiveTotal"],O=["data","messages"],I=["inputs"],P=["data"],C=["data","messages"],N=["inputs"],A=["data"],S=["inputs"],M=["inputs"],R=["stopMessage"];function z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var a,r,i=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(a=t.next()).done)&&(i.push(a.value),!n||i.length!==n);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==t.return||t.return()}finally{if(l)throw r}}return i}(e,n)||L(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){F(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function F(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,n){if(e){if("string"==typeof e)return B(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,n):void 0}}function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function U(e){var n=arguments,t=1;return e.replace(/%([0-9]\$)?([^0-9])/g,(function(e,a,r){return"%"==r?"%":"s"==r?a?n[a.slice(0,1)]:n[t++]:void 0}))}Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var W=function(e){return v.default(e,rn.taxPrecision,an["."],an[","])},Q={nodeName:"br",attributes:{},children:[]},G=function(e){if("string"!=typeof(e=H(e)))return e;var n=e.split("\n");return 1==n.length?n[0]:n.reduce((function(e,n){return 0==e.length?[n]:[].concat(_(e),[Q,n])}),[])},H=function(e){return null==e?null:an.hasOwnProperty(e)?an[e]:(console.log("TO TRANSLATE: ",e),e)},K=function(e,n,t,a,r,i,o){if("number"==typeof e&&!isNaN(e))return e;var l=function(e){if(!isFinite(e))throw"evaluation error: overflow in %s";return e};try{return function e(o){if("number"==typeof o)return o;if("string"==typeof o){var u=X("sym",o,n);if(!u)throw"evaluation error: no-variable in %s";if(-1==u.ref)return t;var s=+le(a,u.ref,r,i);if(isNaN(s))throw"evaluation error: no-quantity in %s";return s}if(!Array.isArray(o))throw"evaluation error: unknown-term in %s";switch(o[0]){case"+":return l(e(o[1])+e(o[2]));case"-":return l(e(o[1])-e(o[2]));case"*":return l(e(o[1])*e(o[2]));case"/":var c=e(o[2]);if(0==c)throw"evaluation error: undefined-calculation in %s";return l(e(o[1])/c);case"^":return l(Math.pow(e(o[1]),e(o[2])));case"IFERROR":try{return e(o[1])}catch(n){return e(o[2])}case"ROUND":var d=e(o[1]),v=Math.pow(10,Math.trunc(e(o[2]))),f=d*v;return l((f<0?-1*Math.round(-1*f):Math.round(f))/v);case"ROUNDUP":var m=e(o[1]),p=Math.pow(10,Math.trunc(e(o[2]))),w=m*p;return l((w<0?Math.floor(w):Math.ceil(w))/p);case"ROUNDDOWN":var g=e(o[1]),q=Math.pow(10,Math.trunc(e(o[2])));return l(Math.trunc(g*q)/q);case"TRUNC":var h=e(o[1]),b=3==o.length?Math.trunc(e(o[2])):0,y=Math.pow(10,b);return l(Math.trunc(h*y)/y);case"INT":var x=e(o[1]);return l(Math.floor(x));case"ABS":var T=e(o[1]);return l(T<0?-1*T:T);case"SIGN":var k=e(o[1]);return l(k<0?-1:k>0?1:0);case"QUOTIENT":var O=e(o[2]);if(0==O)throw"evaluation error: undefined-calculation in %s";return l(Math.trunc(e(o[1])/O));case"MOD":var I=e(o[2]);if(0==I)throw"evaluation error: undefined-calculation in %s";var P=e(o[1]);return l(P-I*Math.floor(P/I));case"MIN":for(var C=e(o[1]),N=2;N<o.length;N++){var A=e(o[N]);A<C&&(C=A)}return C;case"MAX":for(var S=e(o[1]),M=2;M<o.length;M++){var R=e(o[M]);R>S&&(S=R)}return S;case"SWITCH":for(var z=e(o[1]),E=2;E<o.length-1;E+=2)if(z==e(o[E]))return e(o[E+1]);if(E!=o.length)return e(o[E]);throw"evaluation error: no matching clause in %s";default:throw"evaluation error: no-function in %s"}}(e)}catch(e){var u=U(H(e),o);return"preview"==ln?alert(u):console.log("[AForms] "+u),NaN}},$=function e(n){var t=document.documentElement.scrollTop||document.body.scrollTop,a=document.getElementById(n).getBoundingClientRect(),r=a.top+t-100,i=a.top+t-150;if(i>t)if(on.smoothScroll){var o=Math.max((i-t)/8,4);window.requestAnimationFrame((function(){return e(n)})),window.scrollTo(0,t+o)}else window.scrollTo(0,i);else if(r<t)if(on.smoothScroll){var l=Math.max((t-r)/8,4);window.requestAnimationFrame((function(){return e(n)})),window.scrollTo(0,t-l)}else window.scrollTo(0,r)},V=function(e,n){var t=Object.keys(n);if(0!=t.length){var a="."+e+t[0],r=document.querySelector(a);r||(r=document.querySelector(".wq-Button.wq-belongs-wnavbase")),console.log("focusErrorInput",e,t[0],r),null==r||r.focus()}},X=function(e,n,t){for(var a=t.length,r=0;r<a;r++)if(t[r][e]==n)return t[r]},Z=function(e,n){for(var t in n)if(n[t]!=e.hasOwnProperty(t))return!1;return!0},J=function(e,n){var t=D({},e);for(var a in n)n[a]?t[a]=!0:delete t[a];return t},Y=function(e,n){var t=D({},e);return delete t[n],t},ee=function(e,n){var t=e.lastIndexOf(n),a=e.slice(t+1);return parseInt(a)},ne=function(e,n,t){var a=_(e);return a[n]=t,a},te=function(e,n){for(var t=n.length,a=0;a<t;a++)if(n[a]==e)return a;return-1},ae=function(e,n,t){for(var a in t)n=e(n,a,t[a]);return n},re=function(e){return""==e},ie=function(e,n){switch(n*=Math.pow(10,e.taxPrecision),e.taxNormalizer){case"trunc":n=Math.trunc(n);break;case"floor":n=Math.floor(n);break;case"ceil":n=Math.ceil(n);break;case"round":n=Math.round(n)}return n/Math.pow(10,e.taxPrecision)},oe=function(e,n,t,a,r){if(null!=n)if(t){if(e<n)return!1}else if(e<=n)return!1;if(null!=a)if(r){if(e>a)return!1}else if(e>=a)return!1;return!0},le=function(e,n,t,a){if(-1==n)return 1;var r=X("id",n,tn.detailItems);return"Quantity"==r.type||"Slider"==r.type?Z(t,r.depends)?e.hasOwnProperty(n)?e[n]:r.initial:NaN:"AutoQuantity"==r.type?a.hasOwnProperty(n)?a[n]:NaN:void 0},ue=function(e){var n=e.type,t=e.checked,a=e.labels,i=e.selectid,o=e.option,l=e.onchange,u=e.navigator,s="wq-option-detail-".concat(i,"-").concat(o.id),c="detail-".concat(i),d=Z(a,o.depends);return r("div",{class:"wq-Option wq-belongs-".concat(u," wq-belongs-selector-").concat(i," ").concat(o.image?"":"wq-media-empty"),key:s,id:s+"-wrapper"},r("input",{type:n,id:s,checked:t,class:"wq--input wq_".concat(c," wq-type-").concat(n," ").concat(t?"wq-is-selected":""),name:c,onchange:l,"data-path":i+"/"+o.id,value:"true",disabled:!d}),r("label",{for:s,class:"wq--label"},r("div",{class:"wq--media"},r(f.Image,{src:o.image,scaling:"center",xclass:"wq-belongs-".concat(u," wq-belongs-option")})),r("div",{class:"wq--main"},r("div",{class:"wq--name"},o.name),r("div",{class:"wq--note"},o.note),r("div",{class:"wq--prices"},"number"==typeof o.normalPrice?r("span",{class:"wq--normalPrice"},dn,W(o.normalPrice),vn):null,"number"==typeof o.price?r("span",{class:"wq--price"},dn,W(o.price),vn):null)),["SALE","RECOMMENDED"].map((function(e,n){return o.ribbons[e]?r("div",{class:"wq--ribbon wq-ribbon-".concat(n+1)},r("span",null,G(e))):null}))))},se=function(e){var n=e.type,t=e.value,a=e.labels,i=e.selectid,o=e.option,l=e.onchange,u=e.navigator,s="wq-quantoption-detail-".concat(i,"-").concat(o.id),c="detail-".concat(i),d=Z(a,o.depends);return r("div",{class:"wq-Option wq-belongs-".concat(u," wq-belongs-selector-").concat(i," wq-type-QuantOption ").concat(o.image?"":"wq-media-empty"),key:s,id:s+"-wrapper"},r("select",{id:s,class:"wq--select wq_".concat(c," ").concat("string"==typeof t||"number"==typeof t?"wq-is-selected":""," wq-type-").concat(n),name:c,onchange:l,disabled:!d,"data-path":i+"/"+o.id},r("option",{value:""},H("Deselect")),function(e,n,t){for(var a=[],r=e;r<=n;r+=t)a.push(r);return a}(o.minimum,o.maximum,o.step).map((function(e){return r("option",{value:e,selected:e==t},e," ",o.suffix)}))),r("label",{for:s,class:"wq--label"},r("div",{class:"wq--media"},r(f.Image,{src:o.image,scaling:"center",xclass:"wq-belongs-".concat(u," wq-belongs-option")})),r("div",{class:"wq--main"},r("div",{class:"wq--name"},o.name),r("div",{class:"wq--note"},o.note),r("div",{class:"wq--prices"},"number"==typeof o.normalPrice?r("span",{class:"wq--normalPrice"},dn,W(o.normalPrice),vn):null,"number"==typeof o.price?r("span",{class:"wq--price"},dn,W(o.price),vn):null),"string"==typeof t||"number"==typeof t?r("div",{class:"wq--quantity"},t):null),["SALE","RECOMMENDED"].map((function(e,n){return o.ribbons[e]?r("div",{class:"wq--ribbon wq-ribbon-".concat(n+1)},r("span",null,G(e))):null}))))},ce=function(e){var n=e.selector,t=e.onoptionchange,a=e.selectedOptions,i=e.labels,o=e.message,l=e.navigator,u="wq-selector-detail-".concat(n.id),s=n.multiple?"checkbox":"radio";return r("div",{class:"wq-Selector wq-lct-enabled ".concat(o?"wq-is-invalid":""," wq-belongs-").concat(l),key:u,id:u,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},r("div",{class:"wq--head"},r("div",{class:"wq--media"},r(f.Image,{src:n.image,scaling:"center",xclass:"wq-belongs-".concat(l," wq-belongs-selector")})),r("div",{class:"wq--main"},r("div",{class:"wq--name"},n.name),r("div",{class:"wq--note"},n.note)),o?r("div",{class:"wq--message wq-lct-enabled",oncreate:f.tnOnCreate,onremove:f.tnOnRemove},G(o)):null),r("div",{class:"wq--body"},n.options.map((function(e,o){return"Option"==e.type?r(ue,{type:s,checked:a.hasOwnProperty(e.id),selectid:n.id,onchange:t,option:e,labels:i,navigator:l}):r(se,{type:s,value:a[e.id],selectid:n.id,onchange:t,option:e,labels:i,navigator:l})}))))},de=function(e){var n=e.quantity,t=e.value,a=e.message,i=e.oninput,o=e.onblur,l=e.navigator,u="wq-quantity-detail-".concat(n.id),s="detail-".concat(n.id);return r("div",{class:"wq-Quantity wq-lct-enabled ".concat(a?"wq-is-invalid":""," wq-belongs-").concat(l),id:u,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},r("div",{class:"wq--head"},r("div",{class:"wq--media"},r(f.Image,{src:n.image,scaling:"center",xclass:"wq-belongs-".concat(l," wq-belongs-quantity")})),r("div",{class:"wq--main"},r("div",{class:"wq--name"},n.name),r("div",{class:"wq--note"},n.note)),a?r("div",{class:"wq--message wq-lct-enabled",oncreate:f.tnOnCreate,onremove:f.tnOnRemove},G(a)):null),r("div",{class:"wq--body"},r(f.InputGroup,{gutter:"mini"},r(f.TextInput,{type:"number",size:"small",name:s,value:t,placeholder:null,invalid:!!a,oninput:i,onblur:o}),n.suffix?r("span",{class:"wq--suffix"},n.suffix):null)))},ve=function(e){var n=e.slider,t=e.value,a=e.message,i=e.oninput,o=e.onchange,l=e.navigator,u="wq-slider-detail-".concat(n.id),s="detail-".concat(n.id);return r("div",{class:"wq-Slider wq-lct-enabled ".concat(a?"wq-is-invalid":""," wq-belongs-").concat(l),id:u,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},r("div",{class:"wq--head"},r("div",{class:"wq--media"},r(f.Image,{src:n.image,scaling:"center",xclass:"wq-belongs-".concat(l," wq-belongs-slider")})),r("div",{class:"wq--main"},r("div",{class:"wq--name"},n.name),r("div",{class:"wq--note"},n.note)),a?r("div",{class:"wq--message wq-lct-enabled",oncreate:f.tnOnCreate,onremove:f.tnOnRemove},G(a)):null),r("div",{class:"wq--body"},r(f.Range,{name:s,value:t,max:n.maximum,min:n.minimum,step:n.step,invalid:!!a,suffix:n.suffix,oninput:i,onchange:o})))},fe=function(e,n){var t=e.data,a=e.onoptionchange,i=e.ontextinput,o=e.ontextblur,l=e.onrangeblur,u=e.labels,s=e.messages,c="wq-hnavigator";return r("div",{class:"wq-HNavigator",id:c,key:c},n,r("div",{class:"wq--items"},tn.detailItems.map((function(e){var n=s.hasOwnProperty(e.id)?s[e.id]:null;if("Selector"==e.type){if(e.options.some((function(e){return Z(u,e.depends)}))){var c=t.hasOwnProperty(e.id)?t[e.id]:{};return r(ce,{selector:e,onoptionchange:a,selectedOptions:c,labels:u,message:n,navigator:"hnavigator"})}return null}if("Quantity"==e.type){if(Z(u,e.depends)){var d=t.hasOwnProperty(e.id)?t[e.id]:"";return r(de,{quantity:e,value:d,message:n,oninput:i,onblur:o,navigator:"hnavigator"})}return null}if("Slider"==e.type){if(Z(u,e.depends)){var v=t.hasOwnProperty(e.id)?t[e.id]:"";return r(ve,{slider:e,value:v,message:n,navigator:"hnavigator",oninput:i,onchange:l})}return null}return null}))))},me=function(e){document.documentElement.classList.add("wq-x-suspended"),f.tnOnCreate(e)},pe=function(e,n){f.tnOnRemove(e,(function(){document.documentElement.classList.remove("wq-x-suspended"),n()}))},we=function(e,n){var t=e.data,a=e.onoptionchange,i=e.ontextinput,o=e.ontextblur,l=e.onrangeblur,u=e.labels,s=e.messages,c=e.onWizardNext,d=e.onWizardPrev,v=e.onWizardOpen,m=e.onWizardClose,p=e.current,w=e.current2,g=e.open,q=e.flipped,h="wq-wnavigator",b=tn.detailItems.length,y=g&&p<b?tn.detailItems[p]:null,x=(g&&w<b&&tn.detailItems[w],g&&p<b?t.hasOwnProperty(y.id)?t[y.id]:{}:null),T=g&&p<b&&s.hasOwnProperty(y.id)?s[y.id]:null,k=Object.values(s),O=a;return y&&"Selector"==y.type&&!y.multiple&&(a=function(e){return window.setTimeout((function(){c()}),400),O(e)}),r("div",{class:"wq-WNavigator ".concat(g?"wq-is-active":""),key:h,id:h},r("div",{class:"wq--base"},r(f.Button,{type:"primary",onclick:v,xclass:"wq-belongs-wnavbase"},G("Start Order")),k.length>0?r("div",{class:"wq--message wq-lct-enabled",oncreate:f.tnOnCreate,onremove:f.tnOnRemove},G(k[0])):null),g?r("div",{class:"wq--overlay wq-lct-enabled",id:"wq-wnav-overlay",key:"wnav-overlay",oncreate:me,onremove:pe},r("div",{class:"wq--dialog",key:"wnav-dialog"},n,r("div",{class:"wq--main ".concat(q?"wq-is-flipped":""),key:"wnav-main"},r("div",{class:"wq--slide wq-lct-enabled",oncreate:f.tnOnCreate,onremove:f.tnOnRemove,key:"slide-".concat(p),id:"slide-".concat(p)},y&&"Selector"==y.type?r(ce,{selector:tn.detailItems[p],onoptionchange:a,selectedOptions:x,labels:u,message:T,navigator:"wnavigator"}):null,y&&"Quantity"==y.type?r(de,{quantity:y,value:t[y.id],message:T,oninput:i,onblur:o,navigator:"wnavigator"}):null,y&&"Slider"==y.type?r(ve,{slider:y,value:t[y.id],message:T,navigator:"wnavigator",oninput:i,onchange:l}):null)),r("div",{class:"wq--action",key:"wnav-action"},r(f.Button,{type:"normal",onclick:m,xclass:"wq-belongs-wnavdialog wq-for-closewizard"},G("Close")),r("div",{class:"wq--spacer"}),r(f.Button,{type:"normal",onclick:d,xclass:"wq-belongs-wnavdialog wq-for-backwizard",disabled:-1==Qe(w,t)},G("Previous")),r(f.Button,{typr:"normal",onclick:c,disabled:w==b,xclass:"wq-belongs-wnavdialog wq-for-forwardwizard"},G("Next"))))):null)},ge=function(e){var n,t,a,i=e.detailsState,o=e.monitorPos,l=e.confirming,u=e.spShown,s=e.onHide,c="wq-monitor",d="horizontal"==wqData.form.navigator&&wqData.sidebarSelector&&!l,v=d?{left:o.left+"px",width:o.width+"px"}:{};return r("div",{class:"wq-Monitor ".concat(l?"wq-is-confirming":""," ").concat(u?"wq-is-spshown":""," ").concat(d?"wq-is-sidebar":""," ").concat(d?"wq-sticks-"+o.v:""),id:c,key:c,style:v},r("div",{class:"wq--header"},r("div",{class:"wq--title"},H("Quotation Details")),r("div",{class:"wq--menu"},r(f.Button,{type:"normal",onclick:s,xclass:"wq-belongs-monmenu wq-for-hidemonitor"},H("Hide Monitor")))),r("div",{class:"wq--entries"},r("div",{class:"wq--entry wq-for-header"},r("div",{class:"wq--prop wq-for-no"},G("No")),r("div",{class:"wq--prop wq-for-category"},G("Category")),r("div",{class:"wq--prop wq-for-entry"},G("Entry")),r("div",{class:"wq--prop wq-for-normalUnitPrice"},H("Regular Unit Price")),r("div",{class:"wq--prop wq-for-unitPrice"},G("Unit Price")),r("div",{class:"wq--prop wq-for-quantity"},G("Quantity")),r("div",{class:"wq--prop wq-for-price"},G("Price")),!rn.taxIncluded&&r("div",{class:"wq--prop wq-for-taxClass"},G("Tax Class"))),i.details.map((function(e,n){var t="wq-monitor-entry-".concat(e.key);return r("div",{class:"wq--entry wq-for-entry wq-lct-enabled",key:t,id:t,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},r("div",{class:"wq--prop wq-for-no"},n+1),r("div",{class:"wq--prop wq-for-category"},e.category),r("div",{class:"wq--prop wq-for-entry"},e.name),r("div",{class:"wq--prop wq-for-normalUnitPrice"},"number"==typeof e.normalUnitPrice?W(e.normalUnitPrice):null),r("div",{class:"wq--prop wq-for-unitPrice"},W(e.unitPrice)),r("div",{class:"wq--prop wq-for-quantity"},r("span",{class:"wq--simpleDisplay"},e.quantity),r("span",{class:"wq--independentDisplay"},U(H("x%s"),e.quantity))),r("div",{class:"wq--prop wq-for-price"},W(ie(rn,e.unitPrice*e.quantity))),!rn.taxIncluded&&r("div",{class:"wq--prop wq-for-taxClass"},null===e.taxRate?U(G("(common %s%% applied)"),""+rn.taxRate):U(G("(%s%% applied)"),e.taxRate)))}))),rn.taxIncluded?r("div",{class:"wq--footer"},r("div",{class:"wq--entry wq-for-total"},r("div",{class:"wq--prop wq-for-name"},G("Total")),r("div",{class:"wq--prop wq-for-normalValue",key:i.normalTotal},dn+W(i.normalTotal)+vn),r("div",{class:"wq--prop wq-for-value"},dn,r("span",null,r("span",{class:"wq-lct-enabled",id:i.total,key:i.total,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},W(i.total))),vn))):(n=i.total,t=ae((function(e,n,t){return e+t}),n,i.taxes),a=i.taxes.hasOwnProperty("")?i.taxes[""]:null,r("div",{class:"wq--footer"},r("div",{class:"wq--entry wq-for-subtotal"},r("div",{class:"wq--prop wq-for-name"},G("Subtotal")),r("div",{class:"wq--prop wq-for-normalValue",key:i.normalTotal},dn+W(i.normalTotal)+vn),r("div",{class:"wq--prop wq-for-value"},dn,r("span",null,r("span",{class:"wq-lct-enabled",id:n,key:n,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},W(n))),vn)),null!==a?r("div",{class:"wq--entry wq-for-tax wq-rate-common"},r("div",{class:"wq--prop wq-for-name"},U(G("Tax (common %s%%)"),""+rn.taxRate)),r("div",{class:"wq--prop wq-for-normalValue"}),r("div",{class:"wq--prop wq-for-value"},dn,r("span",null,r("span",{class:"wq-lct-enabled",id:a,key:a,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},W(a))),vn)):null,ae((function(e,n,t){return""===n?e:[].concat(_(e),[r("div",{class:"wq--entry wq-for-tax wq-rate-individual"},r("div",{class:"wq--prop wq-for-name"},U(G("Tax (%s%%)"),""+n)),r("div",{class:"wq--prop wq-for-normalValue"}),r("div",{class:"wq--prop wq-for-value"},dn,r("span",null,r("span",{class:"wq-lct-enabled",id:t,key:t,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},W(t))),vn))])}),[],i.taxes),r("div",{class:"wq--entry wq-for-total"},r("div",{class:"wq--prop wq-for-name"},G("Total")),r("div",{class:"wq--prop wq-for-normalValue"}),r("div",{class:"wq--prop wq-for-value"},dn,r("span",null,r("span",{class:"wq-lct-enabled",id:t,key:t,oncreate:f.tnOnCreate,onremove:f.tnOnRemove},W(t))),vn)))))},qe={},he="Input here",be="Invalid",ye="Check here",xe="Select here",Te="Repeat here",ke="Too small",Oe="Too large",Ie="Input in Hiragana",Pe="Input in Katakana";qe.Name={},qe.Name.view=function(e,n,t){var a="wq-attr-name-".concat(e.id);if(e.divided){var i=["name-".concat(e.id,"-0"),"attr-".concat(e.id,"-1")];return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-name wq-is-divided",key:a},r(f.InputGroup,{gutter:"mini",xclass:"wq-belongs-attr wq-belongs-name"},r(f.TextInput,{type:"text",size:"small",name:i[0],placeholder:H("First Name"),value:n.value[0],invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-name wq_attr-".concat(e.id)}),r(f.TextInput,{type:"text",size:"small",name:i[1],placeholder:H("Last Name"),value:n.value[1],invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-name wq_attr-".concat(e.id)})))}var o="name-".concat(e.id);return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-name",key:a},r(f.TextInput,{type:"text",size:"normal",name:o,placeholder:H("Your Name"),value:n.value,invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-name wq_attr-".concat(e.id)}))},qe.Name.initialState=function(e){return e.divided?{value:["",""],message:null}:{value:"",message:null}},qe.Name.compile=function(e,n){return e.divided?n.value.join(" "):n.value},qe.Name.hiraganaPattern=/^([ぁ-ん]|ー| |　)+$/,qe.Name.katakanaPattern=/^([ァ-ン]|ー| |　)+$/,qe.Name.validate=function(e,n){if(e.divided){if(e.required||""!=n.value[0]||""!=n.value[1]){if(""==n.value[0]||""==n.value[1])return{value:n.value,message:he};if(!("hiragana"!=e.pattern||n.value[0].match(qe.Name.hiraganaPattern)&&n.value[1].match(qe.Name.hiraganaPattern)))return{value:n.value,message:Ie};if(!("katakana"!=e.pattern||n.value[0].match(qe.Name.katakanaPattern)&&n.value[1].match(qe.Name.katakanaPattern)))return{value:n.value,message:Pe}}else;return{value:n.value,message:null}}if(e.required||""!=n.value){if(""==n.value)return{value:n.value,message:he};if("hiragana"==e.pattern&&!n.value.match(qe.Name.hiraganaPattern))return{value:n.value,message:Ie};if("katakana"==e.pattern&&!n.value.match(qe.Name.katakanaPattern))return{value:n.value,message:Pe}}else;return{value:n.value,message:null}},qe.Name.createActions=function(e){return e.divided?{oninput:function(e){return function(n,t){var a=ee(e.currentTarget.name,"-");return D(D({},n),{},{value:ne(n.value,a,e.currentTarget.value)})}},onblur:function(n){return function(t,a){if(1==ee(n.currentTarget.name,"-"))if(e.required||""!=t.value[0]||""!=t.value[1]){if(""==t.value[0]||""==t.value[1])return{value:t.value,message:he};if(!("hiragana"!=e.pattern||t.value[0].match(qe.Name.hiraganaPattern)&&t.value[1].match(qe.Name.hiraganaPattern)))return{value:t.value,message:Ie};if(!("katakana"!=e.pattern||t.value[0].match(qe.Name.katakanaPattern)&&t.value[1].match(qe.Name.katakanaPattern)))return{value:t.value,message:Pe}}else;return D(D({},t),{},{message:null})}}}:{oninput:function(e){return function(n,t){return{value:e.currentTarget.value,message:n.message}}},onblur:function(n){return function(n,t){var a=n.value;n._message;if(e.required||""!=a){if(""==a)return{value:a,message:he};if("hiragana"==e.pattern&&!state.value.match(qe.Name.hiraganaPattern))return{value:state.value,message:Ie};if("katakana"==e.pattern&&!state.value.match(qe.Name.katakanaPattern))return{value:state.value,message:Pe}}else;return{value:a,message:null}}}}},qe.Email={},qe.Email.view=function(e,n,t){var a="wq-attr-email-".concat(e.id);if(e.repeated){var i=["email-".concat(e.id,"-0"),"email-".concat(e.id,"-1")];return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-email",key:a},r(f.TextInput,{type:"text",size:"full",name:i[0],placeholder:H("info@example.com"),value:n.value[0],invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-email wq_attr-".concat(e.id)}),r(f.TextInput,{type:"text",size:"full",name:i[1],placeholder:H("Confirm again"),value:n.value[1],invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-email wq_attr-".concat(e.id)}))}var o="email-".concat(e.id);return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-email",key:a},r(f.TextInput,{type:"text",size:"full",name:o,placeholder:H("info@example.com"),value:n.value,invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-email wq_attr-".concat(e.id)}))},qe.Email.pattern=/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/,qe.Email.initialState=function(e){return e.repeated?{value:["",""],message:null}:{value:"",message:null}},qe.Email.compile=function(e,n){return e.repeated?n.value[0]:n.value},qe.Email.validate=function(e,n){if(e.repeated){if(e.required||""!=n.value[0]||""!=n.value[1]){if(""==n.value[0]||""==n.value[1])return D(D({},n),{},{message:he});if(!n.value[0].match(qe.Email.pattern))return D(D({},n),{},{message:be});if(n.value[0]!=n.value[1])return D(D({},n),{},{message:Te})}else;return D(D({},n),{},{message:null})}if(e.required||""!=n.value){if(""==n.value)return{value:n.value,message:he};if(!n.value.match(qe.Email.pattern))return{value:n.value,message:be}}else;return{value:n.value,message:null}},qe.Email.createActions=function(e){return e.repeated?{oninput:function(e){return function(n,t){var a=ee(e.currentTarget.name,"-");return D(D({},n),{},{value:ne(n.value,a,e.currentTarget.value)})}},onblur:function(n){return function(t,a){var r=t.value;t._message;if(1==ee(n.currentTarget.name,"-"))if(e.required||""!=r[0]||""!=r[1]){if(""==r[0]||""==r[1])return{value:r,message:he};if(!r[0].match(qe.Email.pattern))return{value:r,message:be};if(r[0]!=r[1])return{value:r,message:Te}}else;return{value:r,message:null}}}}:{oninput:function(e){return function(n,t){return{value:e.currentTarget.value,message:n.message}}},onblur:function(n){return function(n,t){var a=n.value;n._message;if(e.required||""!=a){if(""==a)return{value:a,message:he};if(!a.match(qe.Email.pattern))return{value:a,message:be}}else;return{value:a,message:null}}}}},qe.Tel={},qe.Tel.view=function(e,n,t){var a="wq-attr-tel-".concat(e.id);if(e.divided){var i="tel-".concat(e.id),o=H("03-1111-2222").split("-");return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-tel",key:a},r(f.InputGroup,{xclass:"wq-belongs-attr wq-belongs-tel"},r(f.TextInput,{type:"tel",size:"nano",name:i+"-0",placeholder:o[0],value:n.value[0],invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-tel wq_attr-".concat(e.id)}),r("span",null,"-"),r(f.TextInput,{type:"tel",size:"mini",name:i+"-1",placeholder:o[1],value:n.value[1],invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-tel wq_attr-".concat(e.id)}),r("span",null,"-"),r(f.TextInput,{type:"tel",size:"mini",name:i+"-2",placeholder:o[2],value:n.value[2],invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-tel wq_attr-".concat(e.id)})))}var l="tel-".concat(e.id);return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-tel",key:a},r(f.TextInput,{type:"tel",size:"small",name:l,placeholder:H("03-1111-2222"),value:n.value,invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-tel wq_attr-".concat(e.id)}))},qe.Tel.initialState=function(e){return e.divided?{value:["","",""],message:null}:{value:"",message:null}},qe.Tel.compile=function(e,n){return e.divided?""==n.value[0]?"":n.value.join("-"):n.value},qe.Tel.validate=function(e,n){if(e.divided){if(!e.required&&n.value.every(re));else{if(n.value.some(re))return{value:n.value,message:he};if(!n.value.join("").match(/^[0-9]+$/))return{value:n.value,message:be}}return{value:n.value,message:null}}if(e.required||""!=n.value){if(""==n.value)return{value:n.value,message:he};if(!n.value.match(/^[0-9-]+$/))return{value:n.value,message:be}}else;return{value:n.value,message:null}},qe.Tel.createActions=function(e){return e.divided?{oninput:function(e){return function(n,t){var a=ee(e.currentTarget.name,"-");return D(D({},n),{},{value:ne(n.value,a,e.currentTarget.value)})}},onblur:function(n){return function(t,a){var r=t.value;t._message;if(2==ee(n.currentTarget.name,"-"))if(!e.required&&r.every(re));else{if(r.some(re))return{value:r,message:he};if(!r.join("").match(/^[0-9]+$/))return{value:r,message:be}}return{value:r,message:null}}}}:{oninput:function(e){return function(n,t){return D(D({},n),{},{value:e.currentTarget.value})}},onblur:function(n){return function(n,t){var a=n.value;n._message;if(e.required||""!=a){if(""==a)return{value:a,message:he};if(!a.match(/^[0-9-]+$/))return{value:a,message:be}}else;return{value:a,message:null}}}}},qe.Address={},qe.Address.view=function(e,n,t){var a="wq-attr-address-".concat(e.id),i="address-".concat(e.id);return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-address",key:a},r(f.InputGroup,{gutter:"mini",xclass:"wq-belongs-attr wq-belongs-address"},r("span",null,G("Zip")),r(f.TextInput,{type:"tel",name:"".concat(i,"-0"),size:"small",value:n.value[0],oninput:t.oninput,onblur:t.onblur,placeholder:H("000-0000"),invalid:!!n.message,xclass:"wq-belongs-attr wq-belongs-address wq-for-zip wq_attr-".concat(e.id)})),r(f.InputGroup,{gutter:"mini",xclass:"wq-belongs-attr wq-belongs-address"},r(f.TextInput,{type:"text",name:"".concat(i,"-1"),size:"small",value:n.value[1],oninput:t.oninput,onblur:t.onblur,placeholder:H("Tokyo"),invalid:!!n.message,xclass:"wq-belongs-attr wq-belongs-address wq-for-pref wq_attr-".concat(e.id)}),r(f.TextInput,{type:"text",name:"".concat(i,"-2"),size:"small",value:n.value[2],oninput:t.oninput,onblur:t.onblur,placeholder:H("Chiyoda-ku"),invalid:!!n.message,xclass:"wq-belongs-attr wq-belongs-address wq-for-city wq_attr-".concat(e.id)})),r(f.TextInput,{type:"text",name:"".concat(i,"-3"),size:"full",value:n.value[3],oninput:t.oninput,onblur:t.onblur,placeholder:H("1-1-1, Chiyoda"),invalid:!!n.message,xclass:"wq-belongs-attr wq-belongs-address wq-for-street wq_attr-".concat(e.id)}),r(f.TextInput,{type:"text",name:"".concat(i,"-4"),size:"full",value:n.value[4],oninput:t.oninput,onblur:t.onblur,placeholder:H("Chiyoda mansion 8F"),invalid:!!n.message,xclass:"wq-belongs-attr wq-belongs-address wq-for-room wq_attr-".concat(e.id)}))},qe.Address.initialState=function(e){return{message:null,value:["","","","",""]}},qe.Address.compile=function(e,n){return n.value.every(re)?"":"".concat(n.value[0]," ").concat(n.value[1]).concat(n.value[2]).concat(n.value[3]," ").concat(n.value[4])},qe.Address.validate=function(e,n){var t=n.value;n.message;if(!e.required&&t.every(re));else{if(""==t[0]||""==t[1]||""==t[2]||""==t[3])return{value:t,message:he};if(!t[0].match(new RegExp(H("^[0-9]{3}-?[0-9]{4}$"))))return{value:t,message:be}}return{value:t,message:null}},qe.Address.createActions=function(e){return{oninput:function(n){return function(t,a){var r=ee(n.currentTarget.name,"-"),i=n.currentTarget.value;return"yubinbango"==e.autoFill&&0==r&&i.match(new RegExp(H("^[0-9]{3}-?[0-9]{4}$")))&&window.requestAnimationFrame((function(){return e=i,n=a.onfill,void new s.Core(e.replace("-",""),n);var e,n})),D(D({},t),{},{value:ne(t.value,r,i)})}},onblur:function(n){return function(t,a){var r=t.value;t.message;if(4==ee(n.currentTarget.name,"-"))if(!e.required&&r.every(re));else{if(""==r[0]||""==r[1]||""==r[2]||""==r[3])return{value:r,message:he};if(!r[0].match(new RegExp(H("^[0-9]{3}-?[0-9]{4}$"))))return{value:r,message:be}}return{value:r,message:null}}},onfill:function(e){return function(n,t){var a=n.value,r=n.message;return{value:a=[a[0],e.region,e.locality,e.street,a[4]],message:r}}}}},qe.Checkbox={},qe.Checkbox.view=function(e,n,t){var a="wq-attr-checkbox-".concat(e.id),i="checkbox-".concat(e.id);return r(f.Control,{label:"",required:!1,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-checkbox",key:a},r(f.InputGroup,{xclass:"wq-belongs-attr wq-belongs-checkbox"},r(f.Checkbox,{name:i,value:"true",checked:n.checked,invalid:!!n.message,onchange:t.onchange,xclass:"wq-belongs-attr wq-belongs-checkbox",inputXclass:"wq_attr-".concat(e.id)},e.name)))},qe.Checkbox.initialState=function(e){return{checked:!!e.initialValue,message:null}},qe.Checkbox.compile=function(e,n){return n.checked?H("Checked"):""},qe.Checkbox.validate=function(e,n){return e.required&&!n.checked?{checked:n.checked,message:ye}:null==n.message?n:{checked:n.checked,message:null}},qe.Checkbox.createActions=function(e){return{onchange:function(n){return function(t,a){t.checked,t.message;return n.currentTarget.checked?{checked:!0,message:null}:e.required?{checked:!1,message:ye}:{checked:!1,message:null}}}}},qe.Radio={},qe.Radio.view=function(e,n,t){var a="wq-attr-radio-".concat(e.id),i="radio-".concat(e.id);return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-radio",key:a},r(f.InputGroup,{gutter:"mini",xclass:"wq-belongs-attr wq-belongs-radio"},e.options.map((function(a,o){return r(f.RadioButton,{name:i,value:a,checked:n.value==a,invalid:!!n.message,onchange:t.onchange,index:o,xclass:"wq-belongs-attr wq-belongs-radio",inputXclass:"wq_attr-".concat(e.id)},a)}))))},qe.Radio.initialState=function(e){var n=e.options.filter((function(n){return n==e.initialValue}));return{value:n.length>0?n[0]:null,message:null}},qe.Radio.compile=function(e,n){return n.value},qe.Radio.validate=function(e,n){if(e.required||null!=n.value){if(null==n.value)return{value:n.value,message:xe};if(-1==te(n.value,e.options))return{value:n.value,message:be}}else;return{value:n.value,message:null}},qe.Radio.createActions=function(e){return{onchange:function(e){return function(n,t){n.value,n.message;if(e.currentTarget.checked)return{value:e.currentTarget.value||null,message:null}}}}},qe.Dropdown={},qe.Dropdown.view=function(e,n,t){var a="wq-attr-dropdown-".concat(e.id),i="dropdown-".concat(e.id),o=H("Please select");return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-dropdown",key:a},r(f.Select,{name:i,options:e.options,value:n.value,invalid:!!n.message,onchange:t.onchange,xclass:"wq-belongs-attr wq-belongs-select",inputXclass:"wq_attr-".concat(e.id),placeholder:o}))},qe.Dropdown.initialState=qe.Radio.initialState,qe.Dropdown.compile=qe.Radio.compile,qe.Dropdown.validate=qe.Radio.validate,qe.Dropdown.createActions=function(e){return{onchange:function(n){return function(t,a){t._value,t.message;var r=n.currentTarget.value||null;return{value:r,message:!r&&e.required?xe:null}}}}},qe.MultiCheckbox={},qe.MultiCheckbox.view=function(e,n,t){var a="wq-attr-multicheckbox-".concat(e.id),i="multicheckbox-".concat(e.id);return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-multicheckbox",key:a},r(f.InputGroup,{gutter:"mini",xclass:"wq-belongs-attr wq-belongs-multicheckbox"},e.options.map((function(o,l){return r(f.Checkbox,{id:"".concat(a,"-").concat(l),name:i,value:o,checked:-1!=te(o,n.value),invalid:!!n.message,onchange:t.onchange,xclass:"wq-belongs-attr wq-belongs-multicheckbox",inputXclass:"wq_attr-".concat(e.id)},o)}))))},qe.MultiCheckbox.initialState=function(e){return{value:e.initialValue,message:null}},qe.MultiCheckbox.compile=function(e,n){return n.value},qe.MultiCheckbox.validate=function(e,n){if(e.required||0!=n.value.length){if(0==n.value.length)return{value:n.value,message:xe}}else;return{value:n.value,message:null}},qe.MultiCheckbox.createActions=function(e){return{onchange:function(e){return function(n,t){var a=n.value,r=(n.message,e.currentTarget.value);return{value:e.currentTarget.checked?[].concat(_(a),[r]):a.filter((function(e){return e!=r})),message:null}}}}},qe.Text={},qe.Text.view=function(e,n,t){var a="wq-attr-text-".concat(e.id),i="text-".concat(e.id);return e.multiline?r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-text wq-has-textarea",key:a},r(f.TextArea,{size:e.size,name:i,placeholder:e.placeholder,value:n.value,invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-text wq_attr-".concat(e.id)})):r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-text"},r(f.TextInput,{type:"text",size:e.size,name:i,placeholder:e.placeholder,value:n.value,invalid:!!n.message,oninput:t.oninput,onblur:t.onblur,xclass:"wq-belongs-attr wq-belongs-text wq_attr-".concat(e.id)}))},qe.Text.initialState=function(e){return{value:"",message:null}},qe.Text.compile=function(e,n){return n.value},qe.Text.validate=function(e,n){return e.required&&""==n.value?{value:n.value,message:he}:null==n.message?n:{value:n.value,message:null}},qe.Text.createActions=function(e){return{oninput:function(e){return function(n,t){return D(D({},n),{},{value:e.currentTarget.value})}},onblur:function(n){return function(n,t){return e.required&&""==n.value?{value:n.value,message:he}:{value:n.value,message:null}}}}},qe.reCAPTCHA3={},qe.reCAPTCHA3.view=function(e,n,t){return null},qe.reCAPTCHA3.initialState=function(e){return e.siteKey&&window.setTimeout((function(){var n=document.createElement("script");n.setAttribute("src","https://www.google.com/recaptcha/api.js?render=".concat(e.siteKey)),document.body.appendChild(n)}),1e3),{value:"",message:null}},qe.reCAPTCHA3.compile=function(e,n){return e.siteKey?function(n){grecaptcha.execute(e.siteKey,{action:e.action}).then((function(e){n(e)}))}:""},qe.reCAPTCHA3.validate=function(e,n){return n},qe.reCAPTCHA3.createActions=function(e){},qe.File={},qe.File.view=function(e,n,t){var a="wq-attr-file-".concat(e.id),i="file-".concat(e.id);return r(f.Control,{label:e.name,required:e.required,message:G(n.message),note:e.note,requiredText:G(e.required?"required":"optional"),id:a,xclass:"wq-belongs-attr wq-for-file"},r(f.InputGroup,{gutter:"mini",xclass:"wq-belongs-attr wq-belongs-file"},e.multiple||0==n.value.length?r(f.FileInput,{key:"file-input",name:i,onchange:t.onChange,extensions:e.extensions,multiple:e.multiple,inputXclass:"wq_attr-".concat(e.id),xclass:n.dragover?"wq-is-dragging":"",invalid:!!n.message,ondragover:t.onDragOver,ondragleave:t.onDragLeave,ondrop:t.onDrop},H("Drop files here or click")):null,n.value.map((function(e,n){return r(f.File,{index:n,key:e.key,url:e.url,name:e.name,loading:!e.url,ondelete:t.onDelete})}))))},qe.File.initialState=function(e){return{value:[],message:null,dragover:!1}},qe.File.compile=function(e,n){return n.value.map((function(e){e.key;return E(e,T)}))},qe.File.validate=function(e,n){if(e.required&&0==n.value.length)return{value:n.value,message:he};for(var t=0;t<n.value.length;t++)if(!n.value[t].url)return D(D({},n),{},{message:"Wait for upload"});return null==n.message?n:D(D({},n),{},{message:null})},qe.File.createActions=function(e){return{onDelete:function(e){return function(n,t){var a=e.currentTarget.dataset.index;if(window.confirm(H("Removing the file. Are you sure?"))){var r=_(n.value);return r.splice(a,1),D(D({},n),{},{value:r})}}},onChange:function(n){return function(t,a){for(var r=Math.floor((new Date).getTime()/1e3),i=n.currentTarget.files,o=window.aformsUpload(tn.id,e,r,i,a.onChangeK),l=_(t.value),u=0;u<i.length;u++)o[u]&&l.push({key:r+"-"+u,name:i[u].name,url:null});return D(D({},t),{},{value:l})}},onChangeK:function(e){var n=e.uploadId,t=e.urls,a=e.message;return function(e,r){a&&window.alert(a);var i=_(e.value);t.forEach((function(e,t){var a=function(e,n,t){for(var a=t.length,r=0;r<a;r++)if(t[r][e]==n)return r;return-1}("key",n+"-"+t,i);-1!=a&&(e?i[a]=D(D({},i[a]),{},{url:e}):i.splice(a,1))}));var o=i.length&&e.message?null:e.message;return D(D({},e),{},{value:i,message:o})}},onDragOver:function(e){return function(n,t){return e.preventDefault(),D(D({},n),{},{dragover:!0})}},onDragLeave:function(e){return function(e,n){return D(D({},e),{},{dragover:!1})}},onDrop:function(n){return function(t,a){n.preventDefault();for(var r=Math.floor((new Date).getTime()/1e3),i=n.dataTransfer.files,o=window.aformsUpload(tn.id,e,r,i,a.onChangeK),l=_(t.value),u=0;u<i.length;u++)o[u]&&l.push({key:r+"-"+u,name:i[u].name,url:null});return D(D({},t),{},{value:l,dragover:!1})}}}};var Ce,Ne,Ae,Se,Me,Re=function(e,n,t,a,r,i,o){return{key:e,category:n,name:t,quantity:a,normalUnitPrice:r,unitPrice:i,taxRate:o}},ze=function(e){var n=tn.detailItems.reduce((function(e,n){return Ee[n.type](e,n)}),{inputs:e,env:{},labels:{},details:[],total:0,normalTotal:0,effectiveTotal:0}),t=(n.env,n.effectiveTotal,E(n,k));if(rn.taxIncluded)return t;var a=t.details.reduce((function(e,n){var t=null===n.taxRate?"":""+n.taxRate,a=(e.hasOwnProperty(t)?e[t]:0)+ie(rn,n.unitPrice*n.quantity);return D(D({},e),{},F({},t,a))}),{}),r=ae((function(e,n,t){var a=""===n?rn.taxRate:n,r=ie(rn,t*a*.01);return D(D({},e),{},F({},n,r))}),{},a);return D(D({},t),{},{subtotals:a,taxes:r})},Ee={Selector:function(e,n){return e.inputs.hasOwnProperty(n.id)?n.options.reduce((function(e,t){if(!e.inputs.hasOwnProperty(n.id))return e;var a=e.inputs[n.id];if(!a.hasOwnProperty(t.id))return e;if(!Z(e.labels,t.depends)){var r=D(D({},e.inputs),{},F({},n.id,Y(a,t.id)));return D(D({},e),{},{inputs:r})}var i=le(e.inputs,n.quantity,e.labels,e.env),o="Option"==t.type?i:i*a[t.id];if(isNaN(o))return e;if("number"!=typeof t.price){var l=J(e.labels,t.labels);return D(D({},e),{},{labels:l})}var u=Re("Option-".concat(n.id,"-").concat(t.id),n.name,t.name,o,t.normalPrice,t.price,t.taxRate),s=[].concat(_(e.details),[u]),c=J(e.labels,t.labels),d=ie(rn,u.unitPrice*u.quantity),v=e.total+d,f=e.normalTotal+ie(rn,("number"==typeof u.normalUnitPrice?u.normalUnitPrice:u.unitPrice)*u.quantity),m=e.effectiveTotal+d;return D(D({},e),{},{details:s,labels:c,total:v,normalTotal:f,effectiveTotal:m})}),e):e},Auto:function(e,n){if(!Z(e.labels,n.depends))return e;var t=le(e.inputs,n.quantity,e.labels,e.env);if(isNaN(t))return e;var a=K(n.priceAst,n.priceVars,e.effectiveTotal,e.inputs,e.labels,e.env,n.price);if(isNaN(a))return e;var r=Re("Auto-".concat(n.id),n.category,n.name,t,n.normalPrice,a,n.taxRate),i=[].concat(_(e.details),[r]),o=ie(rn,r.unitPrice*r.quantity),l=e.total+o,u=e.normalTotal+ie(rn,("number"==typeof r.normalUnitPrice?r.normalUnitPrice:r.unitPrice)*r.quantity),s=e.effectiveTotal+o;return D(D({},e),{},{details:i,total:l,normalTotal:u,effectiveTotal:s})},Adjustment:function(e,n){if(!Z(e.labels,n.depends))return e;var t=le(e.inputs,n.quantity,e.labels,e.env);if(isNaN(t))return e;var a=K(n.priceAst,n.priceVars,e.effectiveTotal,e.inputs,e.labels,e.env,n.price);if(isNaN(a))return e;var r=Re("Adjustment-".concat(n.id),n.category,n.name,t,n.normalPrice,a,n.taxRate),i=[].concat(_(e.details),[r]),o=ie(rn,r.unitPrice*r.quantity),l=e.total+o,u=e.normalTotal+ie(rn,("number"==typeof r.normalUnitPrice?r.normalUnitPrice:r.unitPrice)*r.quantity);return D(D({},e),{},{details:i,total:l,normalTotal:u})},PriceWatcher:function(e,n){if(!oe(e.effectiveTotal,n.lower,n.lowerIncluded,n.higher,n.higherIncluded))return e;var t=J(e.labels,n.labels);return D(D({},e),{},{labels:t})},QuantityWatcher:function(e,n){if(-1==n.target)return e;var t=le(e.inputs,n.target,e.labels,e.env);if(isNaN(t))return e;if(!oe(t,n.lower,n.lowerIncluded,n.higher,n.higherIncluded))return e;var a=J(e.labels,n.labels);return D(D({},e),{},{labels:a})},Quantity:function(e,n){if(!e.inputs.hasOwnProperty(n.id)){var t=D(D({},e.inputs),{},F({},n.id,n.initial));return D(D({},e),{},{inputs:t})}return e},Slider:function(e,n){if(!e.inputs.hasOwnProperty(n.id)){var t=D(D({},e.inputs),{},F({},n.id,n.initial));return D(D({},e),{},{inputs:t})}return e},AutoQuantity:function(e,n){var t=K(n.quantityAst,n.quantityVars,e.effectiveTotal,e.inputs,e.labels,e.env,n.quantity);if(isNaN(t))return e;var a=D(D({},e.env),{},F({},n.id,t));return D(D({},e),{},{env:a})},Stop:function(e,n,t){return e}},je={Selector:function(e,n,t){return e.hasOwnProperty(n.id)||n.multiple||n.options.every((function(e){return!Z(t,e.depends)}))?null:xe},Auto:function(e,n,t){return null},Adjustment:function(e,n,t){return null},PriceWatcher:function(e,n,t){return null},QuantityWatcher:function(e,n,t){return null},Quantity:function(e,n,t){if(!Z(t,n.depends))return null;if(!e.hasOwnProperty(n.id)||""===e[n.id])return he;var a=n.allowFraction?parseFloat(e[n.id]):parseInt(e[n.id],10);return isNaN(a)||a+""!=e[n.id]?be:null!==n.minimum&&n.minimum>a?ke:null!==n.maximum&&n.maximum<a?Oe:null},Slider:function(e,n,t){if(!Z(t,n.depends))return null;if(!e.hasOwnProperty(n.id)||""===e[n.id])return he;var a=parseFloat(e[n.id]);return isNaN(a)||a+""!=e[n.id]?be:null},AutoQuantity:function(e,n,t){return null},Stop:function(e,n,t){return Z(t,n.depends)?n.message:null}},De={selectChange:function(e){return function(n,t){var a=n.data,r=n.messages,i=E(n,O),o=z(e.target.dataset.path.split("/"),2),l=o[0],u=o[1];a.hasOwnProperty(l)||(a[l]={});var s=X("id",l,tn.detailItems),c=X("id",u,s.options);if(s.multiple)if("Option"==c.type)if(e.target.checked)a=D(D({},a),{},F({},l,D(D({},a[l]),{},F({},u,!0))));else{var d=a[l];a=D(D({},a),{},F({},l,Y(d,u)))}else if(""!=e.target.value)a=D(D({},a),{},F({},l,D(D({},a[l]),{},F({},u,e.target.value))));else{var v=a[l];a=D(D({},a),{},F({},l,Y(v,u)))}else a="Option"==c.type?D(D({},a),{},F({},l,F({},u,!0))):D(D({},a),{},F({},l,F({},u,e.target.value))),r=Y(r,s.id);var f=ze(a),m=f.inputs,p=E(f,I);return D(D(D({},i),p),{},{messages:r,data:m})}},textInput:function(e){return function(n,t){var a=n.data,r=E(n,P),i=ee(e.currentTarget.id,"-");return a=D(D({},a),{},F({},i,e.currentTarget.value)),"number"==e.currentTarget.type&&e.currentTarget!=window.activeElement&&e.currentTarget.focus(),D(D({},r),{},{data:a})}},textBlur:function(e){return function(n,t){var a=n.data,r=n.messages,i=E(n,C),o=ee(e.currentTarget.id,"-"),l=X("id",o,tn.detailItems);if(""===a[o])return r=D(D({},r),{},F({},o,he)),D(D({},d),{},{data:a,messages:r});var u=l.allowFraction?parseFloat(a[o]):parseInt(a[o],10);if(isNaN(u)||u+""!=a[o])return r=D(D({},r),{},F({},o,be)),D(D({},d),{},{data:a,messages:r});if(null!==l.minimum&&l.minimum>u)return r=D(D({},r),{},F({},o,ke)),D(D({},d),{},{data:a,messages:r});if(null!==l.maximum&&l.maximum<u)return r=D(D({},r),{},F({},o,Oe)),D(D({},d),{},{data:a,messages:r});a=D(D({},a),{},F({},o,u)),r=Y(r,o);var s=ze(a),c=s.inputs,d=E(s,N);return D(D(D({},i),d),{},{data:c,messages:r})}},rangeBlur:function(e){return function(n,t){var a=n.data,r=E(n,A),i=ee(e.currentTarget.id,"-");X("id",i,tn.detailItems);a=D(D({},a),{},F({},i,e.currentTarget.value));var o=ze(a),l=o.inputs,u=E(o,S);return D(D(D({},r),u),{},{data:l})}}},Fe=function(e){return function(e,n){return window.setTimeout((function(){$("root")}),100),D(D({},e),{},{viewMode:tn.navigator})}},_e=function(e){return function(n,t){var a,r,i=(a=n.details.data,r=n.details.labels,tn.detailItems.reduce((function(e,n){var t=je[n.type](a,n,r);return t?"Stop"==n.type?D({stopMessage:t},e):D(D({},e),{},F({},n.id,t)):e}),{})),o=i.stopMessage,l=E(i,R),u=function(e){return tn.attrItems.reduce((function(e,n){var t=qe[n.type].validate(n,e[n.id]);return t===e[n.id]?e:D(D({},e),{},F({},n.id,t))}),e)}(n.attrs),s=ae((function(e,n,t){return null==t.message?e:D(D({},e),{},F({},n,t.message))}),{},u);if(o||Object.keys(l).length||Object.keys(s).length){window.requestAnimationFrame((function(){Object.keys(l).length?V("wq_detail-",l):o?window.alert(o):Object.keys(s).length&&V("wq_attr-",s)}),100);var c=D(D({},n.details),{},{messages:l});return D(D({},n),{},{details:c,attrs:u})}var d=e.currentTarget.dataset.action;if("confirm"==d)return window.setTimeout((function(){$("root")}),100),D(D({},n),{},{viewMode:"confirm"});var v=e.currentTarget.dataset.id,f=function(e){if("preview"!=ln){var a={formId:tn.id,details:n.details.data,attrs:e};"custom"==d?function(e,n,t){var a=sn.replace("placeholder",t);jQuery.ajax({type:"post",url:a,data:JSON.stringify(e),contentType:"application/json",success:function(e){n(e)},error:function(e){var n=403===e.status?H("Failed to submit due to authorization failure."):H("Failed to submit due to some error.");window.alert(n)},dataType:"json"})}(a,t.onactionK,v):function(e,n){jQuery.ajax({type:"post",url:un,data:JSON.stringify(e),contentType:"application/json",success:function(e){n(e)},error:function(e){var n=403===e.status?H("Failed to submit due to authorization failure."):H("Failed to submit due to some error.");window.alert(n)},dataType:"json"})}(a,t.onactionK)}else window.requestAnimationFrame((function(){window.alert(H("Processing stopped due to preview mode."))}))};return window.requestAnimationFrame((function(){var e=0,n={};tn.attrItems.forEach((function(t){var a=qe[t.type].compile(t,u[t.id]);if("function"==typeof a){e++,a((function(a){e--,n[t.id]=a,0==e&&f(n)}))}else n[t.id]=a})),0==e&&f(n)})),D(D({},n),{},{loading:!0})}},Le=function(e){return function(n,t){var a=function(e,n){if(e)if("open"==e.action)if(window.open(e.data))n(!0);else{window.aformsDialog(H("Your document is ready."),e.data,H("Open"),(function(e){window.setTimeout((function(){return n(e)}),300)}),H("Skip"))}else n(!1);else n(!1)};if(window.requestAnimationFrame((function(){"show"==e.action?a(e.option,(function(n){window.aformsDialog(e.data,null,null,(function(e){}))})):"open"==e.action?a(e.option,(function(n){window.location.href=e.data})):a(e.option,(function(e){}))})),e.clearLoading)return D(D({},n),{},{loading:!1})}},Be=function(e){return function(e,n){return D(D({},e),{},{spMonitorShown:!1})}},Ue=function(e){return function(e,n){return D(D({},e),{},{spMonitorShown:!0})}},We=function(e,n){for(var t=tn.detailItems.length,a=0;a<t;a++)if(!(a<=e)){var r=tn.detailItems[a];if("Selector"==r.type){if(r.options.some((function(e){return Z(n,e.depends)})))return a}else if(("Quantity"==r.type||"Slider"==r.type)&&Z(n,r.depends))return a}return tn.detailItems.length},Qe=function(e,n){if(e<=0)return-1;var t=tn.detailItems.reduce((function(t,a,r){return e<=r||("Selector"==a.type?a.options.some((function(e){return Z(n,e.depends)}))&&t.push(r):"Quantity"!=a.type&&"Slider"!=a.type||Z(n,a.depends)&&t.push(r)),t}),[]);return t.length>0?t.pop():-1},Ge=function(e){return function(e,n){var t=We(-1,e.details.labels);return D(D({},e),{},{wIndex:t,wIndex2:t,wizardOpen:!0,wFlipped:!1})}},He=function(e){return function(e,n){return D(D({},e),{},{wIndex:-1,wIndex2:-1,wizardOpen:!1})}},Ke=function(e){return function(e,n){var t=tn.detailItems[e.wIndex],a=function(e,n,t){return je[n.type](e,n,t)}(e.details.data,t,e.details.labels);if(a){var r=D(D({},e.details.messages),{},F({},t.id,a)),i=D(D({},e.details),{},{messages:r});return D(D({},e),{},{details:i})}var o=We(e.wIndex,e.details.labels);return o==tn.detailItems.length?(window.setTimeout(n.onWizardClose,800),window.setTimeout((function(){$("wq-monitor")}),800)):window.setTimeout((function(){return n.onWizardNextK(o)}),400),D(D({},e),{},{wIndex:o,wFlipped:!1})}},$e=function(e){return function(n,t){return D(D({},n),{},{wIndex2:e})}},Ve=function(e){return function(e,n){var t=Qe(e.wIndex,e.details.labels);return window.setTimeout((function(){return n.onWizardPrevK(t)}),400),D(D({},e),{},{wIndex:t,wFlipped:!0})}},Xe=function(e){return function(n,t){return D(D({},n),{},{wIndex2:e})}},Ze=function(e){var n=document.getElementById("root").children[0],t=document.getElementById("wq-monitor"),a=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=a.top,o=a.bottom,l=t.getBoundingClientRect().height;return i>pn?{v:"top",left:r.left-a.left,width:r.width}:o<l?{v:"bottom",left:r.left-a.left,width:r.width}:{v:"screen",left:r.left,width:r.width}},Je=function(e){return function(e,n){if("confirm"==e.viewMode)return null;var t=document.querySelector(wqData.sidebarSelector);return t?D(D({},e),{},{monitorPos:Ze(t)}):null}},Ye=function(e){return function(e,n){if("confirm"==e.viewMode)return null;var t=document.querySelector(wqData.sidebarSelector);return t?D(D({},e),{},{monitorPos:Ze(t)}):null}},en=function(e){var n=e.state,t=e.max,a=e.current,i=e.actions,o=e.navigator,l=100*Math.min(t,a)/t;return r("div",{class:"wq-NavBar ".concat("confirm"==n.viewMode?"wq-is-confirming":""," ").concat(n.spMonitorShown?"wq-is-monitor-shown":""," wq-belongs-").concat(o),key:"navbar"},r("div",{class:"wq--progress ".concat(t<a?"wq-is-finished":"")},r("div",{class:"wq--bar"},r("div",{class:"wq--bar-content",style:{width:l+"%",height:l+"%"}})),r("div",{class:"wq--min"},"1"),r("div",{class:"wq--current"},a),r("div",{class:"wq--max"},t),r("div",{class:"wq--percentage"},Math.floor(l))),r("div",{class:"wq--summary"},dn+W(n.details.total)+vn),r("div",{class:"wq--commands"},r(f.Button,{type:"normal",onclick:i.onShowMonitor,xclass:"wq-belongs-navbar wq-for-showmonitor"},G("Show Monitor"))))},nn=function(e,n){var t=tn.detailItems.length,a=e.wIndex,i=("confirm"==e.viewMode?fn.confirm:fn.input).map((function(t){return r(f.Button,{type:t.buttonType,onclick:n.onaction,disabled:e.loading,xclass:"wq-belongs-action wq-for-".concat(t.action),"data-action":t.action,"data-id":t.id},t.label)}));return r("form",{class:"wq-Form ".concat("confirm"==e.viewMode?"wq-is-confirming":""),id:"form-".concat(tn.id),novalidate:!0},r("input",{type:"text",id:"wq-informer",name:"to-disable-auto-submission",style:"display:none;"}),"confirm"==e.viewMode?r("div",{class:"wq--lead"},r("p",{class:"wq--leadText"},G("Please check your entry.")),r(f.Button,{type:"normal",onclick:n.onback,disabled:e.loading,xclass:"wq-for-back"},G("Back"))):null,t>0&&"horizontal"==e.viewMode?r(fe,{data:e.details.data,onoptionchange:n.details.selectChange,labels:e.details.labels,messages:e.details.messages,ontextinput:n.details.textInput,ontextblur:n.details.textBlur,onrangeblur:n.details.rangeBlur},r(en,{state:e,actions:n,current:a,max:t,navigator:"hnavigator"})):null,t>0&&"wizard"==e.viewMode?r(we,{data:e.details.data,onoptionchange:n.details.selectChange,labels:e.details.labels,messages:e.details.messages,onWizardNext:n.onWizardNext,onWizardPrev:n.onWizardPrev,onWizardOpen:n.onWizardOpen,onWizardClose:n.onWizardClose,current:e.wIndex,current2:e.wIndex2,open:e.wizardOpen,flipped:e.wFlipped,ontextinput:n.details.textInput,ontextblur:n.details.textBlur,onrangeblur:n.details.rangeBlur},r(en,{state:e,actions:n,current:a,max:t,navigator:"wnavigator"})):null,t>0?r(ge,{detailsState:e.details,confirming:"confirm"==e.viewMode,spShown:e.spMonitorShown,onHide:n.onHideMonitor,monitorPos:e.monitorPos}):null,tn.attrItems.length>0?"confirm"==e.viewMode?function(e,n){return r("div",{class:"wq-Attributes wq-is-confirming"},tn.attrItems.map((function(n){if("reCAPTCHA3"==n.type)return null;var t="wq-attr-".concat(n.type.toLowerCase(),"-").concat(n.id),a=qe[n.type].compile(n,e[n.id]);return r(f.Control,{label:n.name,required:n.required,id:t,key:t},"File"==n.type?r(f.InputGroup,{gutter:"mini",xclass:"wq-belongs-attr wq-belongs-file"},a.map((function(e,n){return r(f.File,{index:n,key:"file-".concat(n),url:e.url,name:e.name,loading:!e.url,ondelete:null,readonly:!0})}))):r(f.Echo,{value:a,xclass:"wq-belongs-attr wq_attr-".concat(n.id),glue:H(", ")}))})))}(e.attrs,n.attrs):function(e,n){return r("div",{class:"wq-Attributes"},tn.attrItems.map((function(t){return qe[t.type].view(t,e[t.id],n[t.id])})))}(e.attrs,n.attrs):null,i.length>0?r(f.Control,{label:"",required:!1,message:null,note:null,id:"wq-action",xclass:"wq-for-action"},r(f.InputGroup,{gutter:"mini"},i)):null)},tn=wqData.form,an=wqData.catalog,rn=wqData.rule,on=wqData.behavior,ln=wqData.mode,un=wqData.submitUrl,sn=wqData.customUrl,cn=z(an["$%s"].split("%s"),2),dn=cn[0],vn=cn[1],fn=wqData.actionSpecMap,mn=(Ae=tn.attrItems.reduce((function(e,n){var t=e.state,a=e.actions,r=qe[n.type].initialState(n),i=qe[n.type].createActions(n);return{actions:D(D({},a),{},F({},n.id,i)),state:D(D({},t),{},F({},n.id,r))}}),{actions:{},state:{}}),Se=Ae.state,Me=Ae.actions,i({details:(Ce=ze({}),Ne=Ce.inputs,D(D({},E(Ce,M)),{},{data:Ne,messages:{}})),attrs:Se,viewMode:tn.navigator,loading:!1,spMonitorShown:!1,wIndex:-1,wIndex2:-1,wizardOpen:!1,wFlipped:!1,monitorPos:{v:"top",left:5e3,width:0}},{details:De,attrs:Me,onback:Fe,onaction:_e,onactionK:Le,onHideMonitor:Be,onShowMonitor:Ue,onWizardClose:He,onWizardOpen:Ge,onWizardNext:Ke,onWizardNextK:$e,onWizardPrev:Ve,onWizardPrevK:Xe,onscroll:Je,onresize:Ye},nn,document.getElementById("root"))),pn=0;wqData.sidebarSelector&&"horizontal"==tn.navigator&&window.setTimeout((function(){pn=getComputedStyle(document.getElementById("wq-informer")).top.slice(0,-2),document.addEventListener("scroll",mn.onscroll),window.addEventListener("resize",mn.onresize),mn.onscroll(null)}),100)})();
//# sourceMappingURL=front.js.map
